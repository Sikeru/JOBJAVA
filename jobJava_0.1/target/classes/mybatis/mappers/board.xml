<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.1//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.jobjava.JJ.board.dao.BoardDAO">
	<select id="qnaSelectAll" resultType="QnAVO" parameterType="java.util.HashMap">
	<![CDATA[
	SELECT * FROM(SELECT ROWNUM as recNum, QNA_NO, TITLE, CONTENT, QNA_DATE, ID, ANSWER, RESPON,PROCESS
	FROM QNA)
	WHERE recNum BETWEEN(#{section}-1)*100+(#{pageNum}-1)*10+1 AND (#{section}-1)*100+#{pageNum}*10
	ORDER BY QNA_DATE DESC
	]]>
	</select>
	
	<select id="qnaTotalTable" resultType="int">
	<![CDATA[
	SELECT COUNT(QNA_NO) FROM QNA
	]]>
	</select>
	
	<select id="qnaSelectOne" resultType="QnAVO" parameterType="int">
	<![CDATA[
		SELECT QNA_NO, TITLE, CONTENT, QNA_DATE, ID, ANSWER, RESPON,PROCESS
		FROM QNA
		WHERE QNA_NO = #{QNA_NO}
	]]>
	</select>
	
	<select id="selectEmpName" resultType="String" parameterType="QnAVO">
	<![CDATA[
		SELECT NAME FROM EMP
		WHERE ID=#{RESPON}
	]]>
	</select>
	
	
	
	<insert id="insertQnATable" parameterType="QnAVO">
	<![CDATA[
		INSERT INTO QNA(QNA_NO, TITLE,CONTENT, QNA_DATE, ID, PROCESS)
		VALUES (QNA_NO.NEXTVAL, #{TITLE},#{CONTENT} ,SYSDATE, #{ID}, 'X')
	]]>
	</insert>
	
	<update id="upDateQnATable" parameterType="QnAVO">
		UPDATE QNA
		<set>
		<if test="TITLE !='' and TITLE != null">
		TITLE=#{TITLE},
	     </if>
	     <if test="CONTENT !='' and CONTENT != null">
		CONTENT=#{CONTENT},
	     </if>
	     <if test="ANSWER !='' and ANSWER != null">
		ANSWER=#{ANSWER},
	     </if>
	     <if test="RESPON !='' and RESPON != null">
		RESPON=#{RESPON},
		PROCESS='O',
	     </if>
	     </set>
	    WHERE QNA_NO=#{QNA_NO}
	</update>
	
	
	

</mapper>